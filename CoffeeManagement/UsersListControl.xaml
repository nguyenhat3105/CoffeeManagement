<UserControl x:Class="CoffeeManagement.UsersListControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="550" d:DesignWidth="900"
             Background="Transparent">

    <UserControl.Resources>
        <SolidColorBrush x:Key="AccentColor" Color="#D4AF37"/>
        <SolidColorBrush x:Key="AccentForeground" Color="#2A2A2A"/>
        <SolidColorBrush x:Key="AccentHover" Color="#E6B93F"/>

        <SolidColorBrush x:Key="PrimaryTextColor" Color="#333"/>
        <SolidColorBrush x:Key="SecondaryTextColor" Color="#666"/>

        <SolidColorBrush x:Key="SecondaryButtonColor" Color="#6c757d"/>
        <SolidColorBrush x:Key="SecondaryButtonForeground" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="SecondaryButtonHover" Color="#5a6268"/>

        <SolidColorBrush x:Key="DangerButtonColor" Color="#dc3545"/>
        <SolidColorBrush x:Key="DangerButtonForeground" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="DangerButtonHover" Color="#c82333"/>

        <SolidColorBrush x:Key="TextBoxBackground" Color="#F8F8F8"/>
        <SolidColorBrush x:Key="TextBoxBorder" Color="#E0E0E0"/>

        <SolidColorBrush x:Key="DataGridHeaderBackground" Color="#3C3C3C"/>
        <SolidColorBrush x:Key="DataGridHeaderText" Color="#E0E0E0"/>
        <SolidColorBrush x:Key="DataGridRowSelected" Color="#FEF8E7"/>
        <SolidColorBrush x:Key="DataGridRowHover" Color="#F8F9FA"/>
        <SolidColorBrush x:Key="DataGridRowBackground" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="DataGridAltRowBackground" Color="#FDFDFD"/>

        <Style TargetType="DataGrid" x:Key="ModernDataGridStyle">
            <Setter Property="Background" Value="{StaticResource DataGridRowBackground}"/>
            <Setter Property="RowBackground" Value="{StaticResource DataGridRowBackground}"/>
            <Setter Property="AlternatingRowBackground" Value="{StaticResource DataGridAltRowBackground}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#E0E0E0"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserResizeRows" Value="False"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
        </Style>

        <Style TargetType="DataGridColumnHeader" x:Key="DataGridHeaderStyle">
            <Setter Property="Background" Value="{StaticResource DataGridHeaderBackground}"/>
            <Setter Property="Foreground" Value="{StaticResource DataGridHeaderText}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="BorderThickness" Value="0,0,1,0"/>
            <Setter Property="BorderBrush" Value="#555"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>

        <Style TargetType="DataGridCell" x:Key="DataGridCellStyle">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryTextColor}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Padding="{TemplateBinding Padding}" 
                                Background="{TemplateBinding Background}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{StaticResource DataGridRowSelected}"/>
                    <Setter Property="Foreground" Value="{StaticResource AccentForeground}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="DataGridRow" x:Key="DataGridRowStyle">
            <Setter Property="Background" Value="{Binding Background, RelativeSource={RelativeSource Self}}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource DataGridRowHover}"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{StaticResource DataGridRowSelected}"/>
                    <Setter Property="Foreground" Value="{StaticResource AccentForeground}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="BaseActionButtonStyle" TargetType="Button">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5,0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Width" Value="100"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AddButtonStyle" TargetType="Button" BasedOn="{StaticResource BaseActionButtonStyle}">
            <Setter Property="Background" Value="{StaticResource AccentColor}"/>
            <Setter Property="Foreground" Value="{StaticResource AccentForeground}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource AccentHover}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="EditButtonStyle" TargetType="Button" BasedOn="{StaticResource BaseActionButtonStyle}">
            <Setter Property="Background" Value="{StaticResource SecondaryButtonColor}"/>
            <Setter Property="Foreground" Value="{StaticResource SecondaryButtonForeground}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource SecondaryButtonHover}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="DeleteButtonStyle" TargetType="Button" BasedOn="{StaticResource BaseActionButtonStyle}">
            <Setter Property="Background" Value="{StaticResource DangerButtonColor}"/>
            <Setter Property="Foreground" Value="{StaticResource DangerButtonForeground}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource DangerButtonHover}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="TextBox" x:Key="SearchTextBoxStyle">
            <Setter Property="Height" Value="38"/>
            <Setter Property="Padding" Value="12,0,12,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="{StaticResource TextBoxBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryTextColor}"/>
            <Setter Property="CaretBrush" Value="{StaticResource AccentColor}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="19">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" Color="#DDD" Opacity="0.7" BlurRadius="8"/>
                            </Border.Effect>
                            <Grid>
                                <ScrollViewer x:Name="PART_ContentHost" Focusable="False" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" Margin="10,0,0,0"/>
                                <TextBlock x:Name="Placeholder" 
                                           IsHitTestVisible="False"
                                           VerticalAlignment="Center" HorizontalAlignment="Left"
                                           Margin="12,0,0,0"
                                           Foreground="{StaticResource SecondaryTextColor}"
                                           Opacity="0.7">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource Mode=TemplatedParent}}" Value="">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource Mode=TemplatedParent}}" Value="{x:Null}">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource AccentColor}"/>
                                <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                            </Trigger>
                            <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource Self}}" Value="">
                                <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Text, RelativeSource={RelativeSource Self}}" Value="{x:Null}">
                                <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Button" x:Key="SearchButtonStyle">
            <Setter Property="Background" Value="{StaticResource AccentColor}"/>
            <Setter Property="Foreground" Value="{StaticResource AccentForeground}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="38"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="19">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" Color="#CCC" Opacity="0.8" BlurRadius="8"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource AccentHover}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="User Management"
                   FontSize="24"
                   FontWeight="SemiBold"
                   Foreground="{StaticResource PrimaryTextColor}"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Left"
                   Margin="0,0,0,15"/>
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,15">
            <TextBox x:Name="TxtSearch"
                     Width="350"
                     Style="{StaticResource SearchTextBoxStyle}"
                     TextChanged="TxtSearch_TextChanged"/>
            <Button Content="&#xE721;" 
                    Style="{StaticResource SearchButtonStyle}" 
                    Margin="8,0,0,0" 
                    Click="BtnSearch_Click"/>
        </StackPanel>

        <Border Grid.Row="2" CornerRadius="8" Background="{StaticResource DataGridRowBackground}">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="2" Color="#E0E0E0" Opacity="0.8" BlurRadius="15"/>
            </Border.Effect>

            <DataGrid x:Name="DgUsers"
                      Style="{StaticResource ModernDataGridStyle}"
                      ColumnHeaderStyle="{StaticResource DataGridHeaderStyle}"
                      CellStyle="{StaticResource DataGridCellStyle}"
                      RowStyle="{StaticResource DataGridRowStyle}"
                      AlternationCount="2"
                      BorderThickness="0">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60"/>
                    <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="*"/>
                    <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="*"/>
                    <DataGridTextColumn Header="First Name" Binding="{Binding FirstName}" Width="*"/>
                    <DataGridTextColumn Header="Last Name" Binding="{Binding LastName}" Width="*"/>
                    <DataGridTextColumn Header="Role" Binding="{Binding Role.RoleName}" Width="150"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Height="40" Margin="0,15,0,0">
            <Button x:Name="BtnAdd" Content="Add New" 
                    Style="{StaticResource AddButtonStyle}" 
                    Click="BtnAdd_Click"/>
            <Button x:Name="BtnEdit" Content="Edit" 
                    Style="{StaticResource EditButtonStyle}" 
                    Click="BtnEdit_Click"/>
            <Button x:Name="BtnDelete" Content="Delete" 
                    Style="{StaticResource DeleteButtonStyle}" 
                    Click="BtnDelete_Click"/>
        </StackPanel>

    </Grid>
</UserControl>