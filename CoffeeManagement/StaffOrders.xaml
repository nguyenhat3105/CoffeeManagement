<UserControl x:Class="CoffeeManagement.StaffOrders"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:CoffeeManagement">
    <ScrollViewer>
        <ItemsControl x:Name="OrdersItemsControl" Margin="12">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="8" Padding="10" Margin="8" Width="360">
                        <StackPanel>
                            <TextBlock FontWeight="Bold" Text="{Binding Id, StringFormat='Order #{0}'}" />
                            <TextBlock Text="{Binding CreatedAt, StringFormat='Created: {0:G}'}" FontSize="11"/>
                            <TextBlock Text="{Binding Customer.Username, FallbackValue='Guest'}" FontSize="12" />

                            <TextBlock Text="Items:" FontWeight="Bold" Margin="0,6,0,2"/>
                            <ItemsControl ItemsSource="{Binding OrderItems}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" Margin="0,2,0,2">
                                            <TextBlock Text="{Binding MenuItem.Name}" Width="200"/>
                                            <TextBlock Text="{Binding Quantity, StringFormat='x{0}'}" Width="40"/>
                                            <TextBlock Text="{Binding UnitPrice, StringFormat=' {0:C0}'}" Width="80" TextAlignment="Right"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <TextBlock Text="{Binding TotalAmount, StringFormat='Total: {0:C0}'}" FontWeight="Bold" Margin="0,6,0,6"/>

                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="Mark Complete Paid" Click="BtnMarkComplete_Click" Margin="4" Background="Green" Foreground="White"/>
                                <Button Content="Reject" Click="BtnReject_Click" Margin="4" Background="Red" Foreground="White"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>
</UserControl>
